name: "Manual Action"
on:
  workflow_dispatch:

jobs:
  hello:
    name: Hello
    runs-on: [self-hosted, Linux, ARM64]
    steps:
      - name: checkout
        uses: actions/checkout@v4
        with:
          repository: yoshihitoh/ut-cli

      - name: cache
        uses: actions/cache@v4
        with:
          path: |
            ~/.cargo/registry
            ~/.cargo/git
            target
          key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock') }}

      - name: Install Rust toolchain
        uses: dtolnay/rust-toolchain@1.86.0

      - name: Check sccache
        run: which sccache

      - name: Build
        run: RUSTC_WRAPPER=/usr/local/bin/sccache cargo build --release
